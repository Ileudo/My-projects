(()=>{"use strict";var e={103:(e,t,n)=>{n.r(t)},400:(e,t,n)=>{n.r(t)},682:(e,t,n)=>{n.r(t)},218:(e,t,n)=>{n.r(t)},358:(e,t,n)=>{n.r(t)},31:(e,t,n)=>{n.r(t)},970:(e,t,n)=>{n.r(t)},663:(e,t,n)=>{n.r(t)},455:(e,t,n)=>{n.r(t)},94:(e,t,n)=>{n.r(t)},117:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},208:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(949),i=n(24),o=n(776),r=n(931),d=n(638),l=n(607);t.App=class{constructor(){this.container=document.body,this.header=new o.Header,this.container.prepend(this.header.element),this.page=document.createElement("div"),this.page.id="page",this.container.append(this.page),this.catField=new i.CatField,this.cardsField=new s.CardsField,this.AdminPanelCategories=new r.AdminPanelCategories,this.AdminPanelWords=null}init(){this.header.init();const e=window.location.hash;this.renderNewPage(e),this.listenHashChange()}renderNewPage(e){return a(this,void 0,void 0,(function*(){if(this.page.innerHTML="",this.header.offcanvas.element.classList.remove("show"),this.header.closeIcon.element.classList.remove("open"),yield function(){return a(this,void 0,void 0,(function*(){200===(yield fetch(`${l.SERVER_ADRESS}/login`,{credentials:"include"})).status?document.body.classList.add("admin"):document.body.classList.remove("admin")}))}(),this.setActiveOffcanvasLink(e),""===e||"#"===e)this.catField.clear(),this.page.append(this.catField.element),this.catField.init();else if("#cards"===e)this.cardsField.clear(),this.page.append(this.cardsField.element),this.cardsField.init();else if("#card"===e)this.cardsField.clear(),this.page.append(this.cardsField.element),this.cardsField.init();else if("#admin-panel-categories"===e)this.page.append(this.AdminPanelCategories.element),this.AdminPanelCategories.init();else if("#admin-panel-words"===e){localStorage.getItem("admin-category")||localStorage.setItem("admin-category",l.DEFAULT_CATEGORY);const e=localStorage.getItem("admin-category");this.AdminPanelWords=new d.AdminPanelWords(e),this.page.append(this.AdminPanelWords.element),this.AdminPanelWords.init()}}))}setActiveOffcanvasLink(e){var t,n,a;const s=Array.from(this.header.offcanvas.list.querySelectorAll(".nav-link"));null===(n=null===(t=s.find((e=>{var t;return null===(t=e.parentElement)||void 0===t?void 0:t.classList.contains("current")})))||void 0===t?void 0:t.parentElement)||void 0===n||n.classList.remove("current");let i=s.filter((t=>t.dataset.route===e));try{const e=i.find((e=>e.dataset.cat===localStorage.getItem("category")));void 0!==e&&(i=[e]),null===(a=i[0].parentElement)||void 0===a||a.classList.add("current")}catch(e){}}listenHashChange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash;this.renderNewPage(e)}))}}},275:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CloseIcon=void 0,n(31),t.CloseIcon=class{constructor(e,t,n){this.element=document.createElement("button"),this.element.classList.add("close-icon"),this.element.setAttribute("type","button"),this.element.innerHTML="\n    <span></span>\n    <span></span>\n    <span></span>",this.togglingClass=t,this.overlay=n,this.target=e}init(){return this.overlayElement=document.querySelector(this.overlay),this.targetElement=document.querySelector(this.target),this.element.addEventListener("click",(()=>{this.element.classList.toggle("open")})),this.element.addEventListener("click",(e=>{e.stopPropagation(),this.targetElement.classList.toggle(this.togglingClass)})),this.overlayElement.addEventListener("click",(e=>{e.target instanceof HTMLElement&&!e.target.closest(this.target)&&this.targetElement.classList.contains("show")&&(this.element.classList.toggle("open"),this.targetElement.classList.toggle(this.togglingClass))})),this}}},776:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const a=n(440),s=n(275),i=n(582);t.Header=class{constructor(){this.element=document.createElement("header"),this.element.classList.add("header"),this.element.innerHTML='\n    <div class="container-xxl">\n      <div class="header__row">\n      </div>\n    </div>',this.headerRow=this.element.querySelector(".header__row"),this.offcanvas=new a.Offcanvas,this.closeIcon=new s.CloseIcon("#offcanvas","show","body"),this.toggler=new i.Toggler("html","play")}init(){return this.headerRow.append(this.offcanvas.element),this.offcanvas.init(),this.headerRow.append(this.closeIcon.element),this.closeIcon.init(),this.headerRow.append(this.toggler.element),this.toggler.init(),this}}},440:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Offcanvas=void 0,n(663);const s=n(907),i=n(935),o=n(607);t.Offcanvas=class{constructor(){this.element=document.createElement("aside"),this.element.classList.add("offcanvas","offcanvas-start"),this.element.id="offcanvas",this.element.innerHTML='\n    <div class="offcanvas-body mt-5">\n      <ul class="offcanvas__list navbar-nav"></ul>\n    </div>\n    ',this.list=this.element.querySelector(".offcanvas__list"),this.list.innerHTML='\n    <li class="nav-item offcanvas__nav-item--btn-login">\n      <a class="btn nav-link offcanvas__btn-login">Login as admin</a>\n      <div><small>username: admin; password: 0000</small></div>\n    </li>\n    <li class="nav-item"><a class="btn nav-link offcanvas__btn-logout">Log out</a></li>\n    <li class="dropdown nav-item dropdown__admin-panel">\n      <button class="btn dropdown-toggle nav-link" type="button">Admin Panel</button>\n      <ul class="dropdown-menu">\n        <li><a href="#admin-panel-categories" class="btn nav-link offcanvas__admin-panel-categories" data-route="#admin-panel-categories">Categories</a></li>\n        <li><a href="#admin-panel-words" class="btn nav-link offcanvas__admin-panel-words" data-route="#admin-panel-words">Words</a></li>\n      </ul>\n    </li>\n    <li class="nav-item"><a href="#" class="nav-link btn" data-route="">Main Page</a></li>\n    <li class="dropdown nav-item dropdown__categories">\n      <button class="btn dropdown-toggle nav-link" type="button">Choose Category</button>\n      <ul class="dropdown-menu"></ul>\n    </li>\n    ',this.listCategories=this.element.querySelector(".dropdown__categories .dropdown-menu"),this.btnDropdownCategories=this.element.querySelector(".dropdown__categories .dropdown-toggle"),this.listAdminPanel=this.element.querySelector(".dropdown__admin-panel .dropdown-menu"),this.btnDropdownAdminPanel=this.element.querySelector(".dropdown__admin-panel .dropdown-toggle"),this.btnLogin=this.element.querySelector(".offcanvas__btn-login"),this.btnLogout=this.element.querySelector(".offcanvas__btn-logout"),this.btnAdminPanel=this.element.querySelector(".offcanvas__admin-panel"),this.authModal=new s.AuthModal}init(){return a(this,void 0,void 0,(function*(){return yield this.renderMenuList(),this.authModal.init(),this.listenDropdownCall(),this.listenAuthModalCall(),this.listenLogOut(),this.saveCategory(),this}))}renderMenuList(){return a(this,void 0,void 0,(function*(){return(yield i.findAllCategories()).map((e=>e.name)).forEach((e=>{const t=document.createElement("li");t.innerHTML=`<a class="nav-link btn" data-route="#cards" data-cat="${e}">${e}</a>`,this.listCategories.append(t)})),this}))}saveCategory(){return this.element.querySelectorAll("[data-cat]").forEach((e=>{e.addEventListener("click",(()=>{localStorage.setItem("category",e.dataset.cat),"#cards"===window.location.hash?window.location.hash="#card":window.location.hash="#cards"}))})),this}listenDropdownCall(){this.btnDropdownCategories.onclick=()=>{this.listCategories.classList.toggle("show")},this.btnDropdownAdminPanel.onclick=()=>{this.listAdminPanel.classList.toggle("show")}}listenAuthModalCall(){this.btnLogin.onclick=()=>{this.authModal.element.classList.toggle("show"),this.element.append(this.authModal.element)}}listenLogOut(){this.btnLogout.onclick=()=>a(this,void 0,void 0,(function*(){const e=yield fetch(`${o.SERVER_ADRESS}/logout`,{credentials:"include"});document.body.classList.remove("admin"),200===e.status&&(window.location.hash="")}))}}},582:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Toggler=void 0,n(455),t.Toggler=class{constructor(e,t){this.element=document.createElement("label"),this.element.classList.add("toggler"),this.element.innerHTML=`\n      <input type="checkbox" ${"play"===localStorage.getItem("mode")?"checked":""}>\n      <span class="switch-left">Play</span>\n      <span class="switch-right">Train</span>`,this.togglingClass=t,this.targetElement=document.querySelector(e)}init(){return this.element.querySelector("input").addEventListener("change",(()=>{this.targetElement.classList.toggle(this.togglingClass),null===localStorage.getItem("mode")?localStorage.setItem("mode","play"):localStorage.removeItem("mode")})),this}}},388:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0,n(970),t.Modal=class{constructor(){this.element=document.createElement("section"),this.element.classList.add("modal1"),this.element.innerHTML='\n    <div class="modal1__window">\n      <h3 class="modal1__header"></h3>\n      <img class="modal1__img" src="" alt="" />\n      <audio class="modal1__audio" src=""></audio>\n    </div>\n    ',this.header=this.element.querySelector(".modal1__header"),this.img=this.element.querySelector(".modal1__img"),this.audio=this.element.querySelector(".modal1__audio")}}},607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_ADRESS=t.DEFAULT_CATEGORY=void 0,n(387);const a=n(208);t.DEFAULT_CATEGORY="Action1",t.SERVER_ADRESS="https://fast-beach-76784.herokuapp.com";const s=new a.App;null===localStorage.getItem("category")&&localStorage.setItem("category",t.DEFAULT_CATEGORY),"play"===localStorage.getItem("mode")&&document.documentElement.classList.add("play"),s.init()},935:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getWordsData=t.findOneCategoryData=t.findAllCategories=t.getData=void 0;const s=n(607);t.getData=function(){return a(this,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_ADRESS}/api/categories`),t=yield e.json();if(200!==e.status)throw new Error(`${t}`);return t.map((e=>({name:e.name,length:e.cards.length})))}))},t.findAllCategories=function(){return a(this,void 0,void 0,(function*(){const e=yield fetch(`${s.SERVER_ADRESS}/api/categories`),t=yield e.json();if(200!==e.status)throw new Error(`${t}`);return t}))},t.findOneCategoryData=function(e){return a(this,void 0,void 0,(function*(){const t=yield fetch(`${s.SERVER_ADRESS}/api/categories/${e}`),n=yield t.json();if(200!==t.status)throw new Error(`${n}`);return n}))},t.getWordsData=function(e){return a(this,void 0,void 0,(function*(){try{const t=yield fetch(`${s.SERVER_ADRESS}/api/${e}/cards`),n=yield t.json();if(200!==t.status)throw new Error(`${n}`);return n}catch(e){console.log(e.message)}}))}},931:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdminPanelCategories=void 0;const s=n(607),i=n(935),o=n(369),r=n(190);t.AdminPanelCategories=class{constructor(){this.element=document.createElement("section"),this.element.classList.add("admin-panel"),this.element.innerHTML='\n    <div class="container-xxl">\n      <div class="row admin-panel__row"></div>\n    </div>',this.cardsField=this.element.querySelector(".admin-panel__row")}init(){this.render(),this.listenEvents()}render(){this.cardsField.innerHTML="",i.getData().then((e=>{e.map((e=>this.cardsField.append(new o.catCardAdmin(e.name,e.length).element))),this.cardsField.append((new r.catCardNewAdmin).element)}))}listenEvents(){this.element.onclick=e=>a(this,void 0,void 0,(function*(){if(e.target instanceof HTMLElement){if(e.target.classList.contains("admin-panel__card-btn-close")){const t=e.target.closest(".admin-panel__card"),n=t.querySelector(".admin-panel__card-title").textContent,a=yield fetch(`${s.SERVER_ADRESS}/api/categories/${n}`,{method:"DELETE"}),i=yield a.json();return t.remove(),localStorage.removeItem("admin-category"),i}if(e.target.classList.contains("admin-panel__card-update")&&e.target.closest(".admin-panel__card").classList.add("update"),e.target.classList.contains("admin-panel__card-cancel")&&e.target.closest(".admin-panel__card").classList.remove("update"),e.target.classList.contains("admin-panel__card-update-submit")){const t=e.target.closest(".admin-panel__card"),n=t.querySelector(".admin-panel__card-title").textContent,a=t.querySelector(".admin-panel__card-form input").value,i=yield fetch(`${s.SERVER_ADRESS}/api/categories/${n}`,{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify({name:a})}),o=yield i.json();return this.init(),o}if(e.target.classList.contains("admin-panel__card-add-category-cancel")&&e.target.closest(".admin-panel__card-add-category").classList.remove("create"),e.target.classList.contains("admin-panel__card-add-category-image-content")&&e.target.closest(".admin-panel__card-add-category").classList.add("create"),e.target.classList.contains("admin-panel__card-add-category-create")){const t=e.target.closest(".admin-panel__card-add-category").querySelector(".admin-panel__card-add-category-form input").value,n=yield fetch(`${s.SERVER_ADRESS}/api/categories`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:t})}),a=yield n.json();return this.init(),a}if(e.target.classList.contains("admin-panel__card-add-word")){const t=e.target.closest(".admin-panel__card").querySelector(".admin-panel__card-title").textContent;localStorage.setItem("admin-category",t)}}}))}}},369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.catCardAdmin=void 0,n(400),t.catCardAdmin=class{constructor(e,t){this.element=document.createElement("div"),this.element.classList.add("col-sm-6","col-lg-4","col-xl-3","admin-panel__card"),this.element.innerHTML=`\n    <div class="modal-header">\n    <h5 class="modal-title admin-panel__card-title">${e}</h5>\n    <button type="button" class="btn-close admin-panel__card-btn-close"></button>\n  </div>\n  <div class="modal-body">\n    <p class="admin-panel__modal-body-words">WORDS: <b>${t}</b></p>\n    <form class="form-floating admin-panel__card-form">\n      <input type="text" class="form-control" id="input-${e}" placeholder="name@example.com" value="${e}">\n      <label for="input-${e}">Category Name</label>\n    </form>\n  </div>\n  <div class="modal-footer">\n    <button type="button" class="btn btn-outline-success admin-panel__card-update">Update</button>\n    <a href="#admin-panel-words" class="btn btn-outline-success admin-panel__card-add-word">Add Word</a>\n    <button type="button" class="btn btn-outline-danger admin-panel__card-cancel">Cancel</button>\n    <button type="button" class="btn btn-outline-success admin-panel__card-update-submit">Update</button>\n  </div>`}}},190:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.catCardNewAdmin=void 0;const a=n(607);n(682),t.catCardNewAdmin=class{constructor(){this.element=document.createElement("div"),this.element.classList.add("col-sm-6","col-lg-4","col-xl-3","admin-panel__card-add-category"),this.element.innerHTML=`\n      <div class="modal-header">\n        <h5 class="modal-title">Create New Category</h5>\n      </div>\n      <div class="modal-body">\n        <div class="admin-panel__card-add-category-image-wrapper">\n          <img class="admin-panel__card-add-category-image-content" src="${a.SERVER_ADRESS}/images/cross.png" alt="add-card">\n        </div>\n        <form class="form-floating admin-panel__card-add-category-form">\n          <input type="text" class="form-control" id="add-category-input" placeholder="Enter a category name" value="">\n          <label for="add-category-input">Category Name</label>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-outline-danger admin-panel__card-add-category-cancel">Cancel</button>\n        <button type="button" class="btn btn-outline-success admin-panel__card-add-category-create">Create</button>\n      </div>`}}},638:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AdminPanelWords=void 0;const s=n(607),i=n(935),o=n(717),r=n(936);t.AdminPanelWords=class{constructor(e){this.categoryName=e,this.element=document.createElement("section"),this.element.classList.add("words"),this.element.innerHTML=`\n    <div class="container-xxl">\n      <h2 class="words__title">${e}</h2>\n      <div class="row words__row"></div>\n    </div>`,this.cardsField=this.element.querySelector(".words__row")}init(){return a(this,void 0,void 0,(function*(){yield this.render(),this.listenEvents()}))}render(){return a(this,void 0,void 0,(function*(){this.cardsField.innerHTML="";try{const e=yield i.getWordsData(this.categoryName);if(!e)return;e.map((({en:e,ru:t,img:n,audio:a})=>{const s=new o.WordCardAdmin(e,t,n,a);return this.cardsField.append(s.element)}));const t=new r.WordCardNewAdmin;this.cardsField.append(t.element)}catch(e){}}))}listenEvents(){this.element.onclick=e=>a(this,void 0,void 0,(function*(){if(e.target instanceof HTMLElement){if(e.target.classList.contains("words__new-card-add-word-image-content")&&e.target.closest(".words__new-card").classList.add("change"),e.target.classList.contains("words__new-card-btn-cancel")&&e.target.closest(".words__new-card").classList.remove("change"),e.target.classList.contains("words__new-card-btn-add")){e.preventDefault();const t=e.target.closest(".words__new-card").querySelector("form"),n=new FormData(t),a=(yield fetch(`${s.SERVER_ADRESS}/api/${this.categoryName}/cards`,{method:"POST",body:n})).json();return this.init(),a}if(e.target.classList.contains("words__card-btn-change")&&e.target.closest(".words__card").classList.add("change"),e.target.classList.contains("words__card-btn-cancel")&&e.target.closest(".words__card").classList.remove("change"),e.target.classList.contains("words__card-btn-add")){e.preventDefault();const t=e.target.closest(".words__card"),n=t.querySelector("form"),a=new FormData(n),i=t.querySelector(".words__card-form-en-word").textContent,o=(yield fetch(`${s.SERVER_ADRESS}/api/${this.categoryName}/cards/${i}`,{method:"PUT",body:a})).json();return this.init(),o}if(e.target.classList.contains("words__card-btn-close")){const t=e.target.closest(".words__card"),n=t.querySelector(".words__card-form-en-word").textContent,a=yield fetch(`${s.SERVER_ADRESS}/api/${this.categoryName}/cards/${n}`,{method:"DELETE"}),i=yield a.json();return t.remove(),i}}}))}}},717:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WordCardAdmin=void 0;const a=n(607);n(94),t.WordCardAdmin=class{constructor(e,t,n,s){this.en=e,this.ru=t,this.img=n,this.audio=s,this.categoryName=localStorage.getItem("admin-category"),this.element=document.createElement("div"),this.element.classList.add("col-sm-6","col-lg-4","col-xl-3","words__card"),this.element.innerHTML=`\n    <div class="modal-header">\n      <button type="button" class="btn-close words__card-btn-close"></button>\n    </div>\n    <div class="modal-body">\n      <form class="words__new-card-form">\n        <div class="form-floating words__card-form-en--edit">\n          <input type="text" class="form-control" id="add-word-en-${e}" placeholder="Enter a english word" value="${e}">\n          <label for="add-word-en-${e}">Word</label>\n        </div>\n        <div class="form-floating words__card-form-ru--edit">\n          <input type="text" class="form-control" id="add-word-ru-${e}" placeholder="Enter a translation" value="${t}">\n          <label for="add-word-ru-${e}">Translation</label>\n        </div>\n        <div class="words__card-form-audio--edit">\n          <label for="add-word-audio-${e}">Audio:</label>\n          <input type="file" id="add-word-audio-${e}">\n        </div>\n        <div class="words__card-form-img--edit">\n          <label for="add-word-img-${e}">Image:</label>\n          <input type="file" id="add-word-img-${e}">\n        </div>\n      </form>\n      <div class="words__card-form-en">\n        <span><b>en:</b></span>\n        <span class="words__card-form-en-word">${e}</span>\n      </div>\n      <div class="words__card-form-ru">\n        <span><b>ru:</b></span>\n        <span>${t}</span>\n      </div>\n      <div class="words__card-form-audio">\n        <span><b>audio:</b></span>\n        <span>${s}</span>\n      </div>\n      <div class="words__card-form-img">\n        <span><b>image:</b></span>\n        <div class="words__card-form-img-wrapper"><img src="${a.SERVER_ADRESS}/images/${this.categoryName}/${n}" alt="${e}"></div>\n      </div>\n\n    </div>\n    <div class="modal-footer">\n      <button type="button" class="btn btn-outline-success words__card-btn-change">Change</button>\n      <button type="button" class="btn btn-outline-danger words__card-btn-cancel">Cancel</button>\n      <button type="button" class="btn btn-outline-success words__card-btn-add">Add</button>\n    </div>`}}},936:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WordCardNewAdmin=void 0;const a=n(607);n(117),t.WordCardNewAdmin=class{constructor(){this.element=document.createElement("div"),this.element.classList.add("col-sm-6","col-lg-4","col-xl-3","words__new-card"),this.element.innerHTML=`\n    <form class="words__new-card-form">\n      <div class="modal-header">\n        <h5 class="modal-title">Add new word</h5>\n      </div>\n      <div class="modal-body">\n        <div class="words__new-card-add-word-image-wrapper">\n          <img class="words__new-card-add-word-image-content" src="${a.SERVER_ADRESS}/images/cross.png" alt="add-card">\n        </div>\n        <div class="form-floating words__new-card-form-en">\n          <input type="text" name="en" class="form-control" id="add-word-en" placeholder="Enter a english word" value="">\n          <label for="add-word-en">Word</label>\n        </div>\n        <div class="form-floating words__new-card-form-ru">\n          <input type="text" name="ru" class="form-control" id="add-word-ru" placeholder="Enter a translation" value="">\n          <label for="add-word-ru">Translation</label>\n        </div>\n        <div class="words__new-card-form-img">\n          <label for="add-word-img">Image:</label>\n          <input type="file" name="img" id="add-word-img" >\n        </div>\n        <div class="words__new-card-form-audio">\n          <label for="add-word-audio">Audio:</label>\n          <input type="file" name="audio" id="add-word-audio">\n        </div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-outline-danger words__new-card-btn-cancel">Cancel</button>\n        <button type="button" class="btn btn-outline-success words__new-card-btn-add">Add</button>\n      </div>\n    </form>`,this.form=this.element.querySelector("form")}}},907:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthModal=void 0;const s=n(607);n(103),t.AuthModal=class{constructor(){this.element=document.createElement("div"),this.element.classList.add("modal","fade"),this.element.innerHTML='\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <form>\n          <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalLabel">Authorization</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n          </div>\n          <div class="modal-body">\n            <div class="mb-3">\n              <label for="email" class="form-label">Email address</label>\n              <input type="text" name="email" class="form-control" id="email" placeholder="name@example.com">\n            </div>\n            <div class="mb-3">\n              <label for="password" class="form-label">Password</label>\n              <input type="password" name="password" class="form-control" id="password" placeholder="********">\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-danger" id="btn-cancel">Cancel</button>\n            <button type="submit" class="btn btn-success" id="btn-login">Login</button>\n          </div>\n        </form>\n      </div>\n    </div>',this.form=this.element.querySelector("form"),this.closeIcon=this.element.querySelector(".btn-close"),this.btnLogin=this.element.querySelector("#btn-login"),this.btnCancel=this.element.querySelector("#btn-cancel")}init(){return this.listenModalClose(),this.listenLogin(),this}listenModalClose(){return this.closeIcon.addEventListener("click",(e=>{e.stopPropagation(),this.element.classList.toggle("show")})),this.element.addEventListener("click",(function(e){e.target instanceof HTMLElement&&e.target===this&&this.classList.toggle("show")})),this}listenLogin(){return this.form.addEventListener("submit",(e=>a(this,void 0,void 0,(function*(){e.preventDefault();const t=this.form.email.value,n=this.form.password.value;try{const e=yield fetch(`${s.SERVER_ADRESS}/login`,{method:"POST",body:JSON.stringify({username:t,password:n}),headers:{"Content-Type":"application/json"},credentials:"include"}),a=yield e.json();this.element.classList.remove("show"),console.log(a),a.user&&(document.body.classList.add("admin"),window.location.hash="#admin-panel-categories")}catch(e){console.log(new Error("Can not connect to DB. Please, login again later"),e)}})))),this}}},37:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CatCard=void 0;const a=n(607);t.CatCard=class{constructor(e,t){this.element=document.createElement("a"),this.element.classList.add("categories__card","col-sm-6","col-lg-4","col-xl-3"),this.element.setAttribute("href","#cards"),this.element.setAttribute("data-cat",`${e}`),this.card=document.createElement("div"),this.card.classList.add("categories__card-content"),this.element.append(this.card),this.card.innerHTML=`\n    <div class="categories__card-up"></div>\n    <div class="categories__card-avatar">\n      <img src="${a.SERVER_ADRESS}/images/${e}/${t}"/>\n    </div>\n    <div class="categories__card-body">\n      <h4 class="categories__card-title">${e}</h4>\n    </div>\n    `}init(){return this.saveCategory(),this}saveCategory(){return this.element.addEventListener("click",(()=>{localStorage.setItem("category",this.element.dataset.cat)})),this}}},24:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CatField=void 0,n(218);const s=n(37),i=n(935);t.CatField=class{constructor(){this.cards=[],this.element=document.createElement("section"),this.element.classList.add("categories"),this.element.innerHTML='\n    <div class="container-xxl">\n      <div class="row categories__row"></div>\n    </div>',this.categoriesRow=this.element.querySelector(".categories__row")}init(){return a(this,void 0,void 0,(function*(){return yield this.setCards(),this.addCards(),this}))}setCards(){return a(this,void 0,void 0,(function*(){const e=yield i.findAllCategories();return this.cards=e.map((e=>new s.CatCard(e.name,e.img).init())),this}))}addCards(){return this.cards.map((e=>this.categoriesRow.append(e.element))),this}clear(){return this.cards=[],this.categoriesRow.innerHTML="",this}}},465:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const a=n(607);n(358);const s=n(877);t.Card=class{constructor(e){this.en=e.en,this.ru=e.ru,this.img=e.img,this.audio=e.audio,this.element=document.createElement("a"),this.element.classList.add("category__card","col-sm-6","col-lg-4","col-xl-3"),this.element.innerHTML=`\n    <div class="category__card-content">\n      <div class="category__card-back">\n        <span class="bi bi-music-note-beamed"></span>\n        <div class="category__image-wrapper">\n          <img src="${a.SERVER_ADRESS}/images/${localStorage.getItem("category")}/${this.img}" alt="${this.en}" />\n        </div>\n        <div class="category__card-body">\n          <p class="category__card-text">${this.en}</p>\n          <span class="bi bi-arrow-repeat"></span>\n        </div>\n      </div>\n      <div class="category__card-front">\n        <div class="category__image-wrapper">\n          <img src="${a.SERVER_ADRESS}/images/${localStorage.getItem("category")}/${this.img}" alt="${this.ru}" />\n        </div>\n        <div class="category__card-body">\n          <p class="category__card-text">${this.ru}</p>\n        </div>\n      </div>\n      <audio src="${a.SERVER_ADRESS}/audio/${localStorage.getItem("category")}/${this.audio}"></audio>\n    </div>\n    `}init(){return this.element.addEventListener("click",s.flip),this.element.addEventListener("click",s.playAudio),this.element.addEventListener("mouseleave",s.flipBack),this}}},949:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(s,i){function o(e){try{d(a.next(e))}catch(e){i(e)}}function r(e){try{d(a.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}d((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0;const s=n(962),i=n(465),o=n(244),r=n(482),d=n(935);t.CardsField=class{constructor(){this.cards=[],this.audioList=[],this.wrongAnswerCount=0,this.element=document.createElement("section"),this.element.classList.add("category"),this.element.innerHTML='\n    <div class="container-xxl">\n      <div class="category__stars">\n      </div>\n      <div class="row category__row"></div>\n      <div class="category__controls">\n        <button class="btn btn-lg btn-orange-gradient category__btn">\n          Start New Game\n        </button>\n        <button class="btn btn-orange-gradient category__btn-repeat">\n        <span class="btn bi bi-arrow-clockwise"></span>\n        </button>\n      </div>\n      <audio id="correct-answer-sound" src="./assets/audio/correct-answer.mp3"></audio>\n      <audio id="wrong-answer-sound" src="./assets/audio/wrong-answer.mp3"></audio>\n    </div>\n    ',this.categoryRow=this.element.querySelector(".category__row"),this.categoryStars=this.element.querySelector(".category__stars"),this.startGameBtn=this.element.querySelector(".category__btn"),this.repeatAudioBtn=this.element.querySelector(".category__btn-repeat"),this.correctAnswerSound=this.element.querySelector("#correct-answer-sound"),this.wrongAnswerSound=this.element.querySelector("#wrong-answer-sound")}init(){return a(this,void 0,void 0,(function*(){return yield this.setCards(),this.addCards(),this.getAudioList(),this.listenGameStart(),this}))}setCards(){return a(this,void 0,void 0,(function*(){const e=localStorage.getItem("category"),t=yield d.findOneCategoryData(e);return this.cards=t.cards.map((e=>new i.Card(e).init())),this}))}addCards(){return""===this.categoryRow.innerHTML&&this.cards.map((e=>this.categoryRow.append(e.element))),this}getAudioList(){return this.audioList=this.cards.map((e=>e.element.querySelector("audio"))),this.audioList}listenGameStart(){return this.startGameBtn.onclick=()=>{s.store.gameState="started",this.element.classList.add("game"),this.shuffleAudioList(),this.setGuessedCard(),this.playAudio(),this.listenRepeatWord(),this.checkAnswer()},this}shuffleAudioList(){return this.audioList.sort((()=>Math.random()-.5)),this}setGuessedCard(){return this.guessedCard=this.audioList[this.audioList.length-1].closest(".category__card"),this}playAudio(){return this.audioList[this.audioList.length-1].currentTime=0,this.audioList[this.audioList.length-1].play(),this}listenRepeatWord(){return this.repeatAudioBtn.addEventListener("click",(()=>{this.audioList[this.audioList.length-1].currentTime=0,this.audioList[this.audioList.length-1].play()})),this}checkAnswer(){return this.element.onclick=e=>{e.target instanceof HTMLElement&&e.target.closest(".category__card:not(.inactive)")&&"started"===s.store.gameState&&(this.chosenCard=e.target.closest(".category__card"),this.guessedCard===this.chosenCard?(this.correctAnswerSound.currentTime=0,this.correctAnswerSound.play(),this.chosenCard.classList.add("inactive"),this.addStar("+"),this.audioList.pop(),this.isGameFinished()):(this.wrongAnswerSound.currentTime=0,this.wrongAnswerSound.play(),this.wrongAnswerCount++,this.addStar("-")))},this}addStar(e){return"+"===e&&this.categoryStars.insertAdjacentHTML("beforeend",'<span class="bi bi-star-fill"></span>'),"-"===e&&this.categoryStars.insertAdjacentHTML("beforeend",'<span class="bi bi-star"></span>'),this.categoryStars.children.length>10&&this.categoryStars.children[0].remove(),this}isGameFinished(){return 0!==this.audioList.length?(this.setGuessedCard(),setTimeout((()=>this.playAudio()),500)):(this.finishGame(),s.store.gameState="notStarted"),this}finishGame(){if(this.wrongAnswerCount>0){const e=new o.ModalLoose(this.wrongAnswerCount);this.element.append(e.element),e.audio.play(),setTimeout((()=>{e.element.remove(),this.clear(),this.init()}),5e3)}else{const e=new r.ModalWin;this.element.append(e.element),e.audio.play(),setTimeout((()=>{e.element.remove(),this.clear().init()}),6e3)}return this}clear(){return this.categoryRow.innerHTML="",this.categoryStars.innerHTML="",this.cards=[],this.audioList=[],this.wrongAnswerCount=0,this.element.classList.remove("game"),this}}},244:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModalLoose=void 0;const s=n(388),i=a(n(76)),o=a(n(272));class r extends s.Modal{constructor(e){super(),this.header.textContent=1===e?`${e} error`:`${e} errors`,this.img.src=i.default,this.audio.src=o.default}}t.ModalLoose=r},482:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModalWin=void 0;const s=n(388),i=a(n(398)),o=a(n(380));class r extends s.Modal{constructor(){super(),this.header.textContent="Win!",this.img.src=i.default,this.audio.src=o.default}}t.ModalWin=r},877:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.playAudio=t.flipBack=t.flip=void 0,t.flip=function(e){e.target instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&e.target.classList.contains("bi-arrow-repeat")&&e.currentTarget.classList.add("flipped")},t.flipBack=function(e){e.currentTarget instanceof HTMLElement&&e.currentTarget.classList.contains("flipped")&&e.currentTarget.classList.remove("flipped")},t.playAudio=function(e){if(e.target instanceof HTMLElement&&e.currentTarget instanceof HTMLElement&&!e.target.classList.contains("bi-arrow-repeat")&&"play"!==localStorage.getItem("mode")){const t=e.currentTarget.querySelector("audio");t.currentTime=0,t.play()}}},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0,t.store={gameState:"notStarted"}},272:(e,t,n)=>{e.exports=n.p+"assets/audio/finish-game-failure.mp3"},380:(e,t,n)=>{e.exports=n.p+"assets/audio/finish-game-success.mp3"},76:(e,t,n)=>{e.exports=n.p+"assets/images/modal-loose.png"},398:(e,t,n)=>{e.exports=n.p+"assets/images/modal-win.png"}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n(607)})();