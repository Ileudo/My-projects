(()=>{"use strict";var e={387:(e,t,n)=>{n.r(t)},208:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const r=n(265),a=n(556),s=n(858),o=n(848),d=n(974),c=n(463);t.App=class{constructor(){this.container=document.body,this.pageSwitcher=new c.PageSwitcher({tag:"header",class:"page-switcher",id:"page-switcher"}),this.garagePage=new a.GaragePage({tag:"div",class:"garage-page",id:"garage-page"}),this.garagePage.subscribe(),this.winnersPage=new o.WinnersPage({tag:"div",class:"winners-page",id:"winners-page"}),this.winnersPage.element.hidden=!0}run(){return i(this,void 0,void 0,(function*(){yield d.refreshStore(),this.container.append(this.pageSwitcher.render()),this.container.append(this.garagePage.render()),this.container.append(this.winnersPage.render()),this.switchPageListener()}))}switchPageListener(){const e=document.getElementById("to-winners"),t=document.getElementById("to-garage"),n=document.getElementById("garage-page"),a=document.getElementById("winners-page");e.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){a.hidden=!1,n.hidden=!0,yield s.updateStateWinners(),this.winnersPage.render()})))),t.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){a.hidden=!0,n.hidden=!1,yield r.updateStateGarage()}))))}}},865:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e){this.element=document.createElement(e.tag),e.class&&this.element.classList.add(e.class),e.id&&(this.element.id=e.id)}}},463:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageSwitcher=void 0;const i=n(865);class r extends i.BaseComponent{render(){return this.element.innerHTML='\n    <button class="btn btn-outline-yellow btn-sm page-switcher__btn-to-garage" id="to-garage">To Garage</button>\n    <button class="btn btn-outline-yellow btn-sm page-switcher__btn-to-winners" id="to-winners">To Winners</button>',this.element}}t.PageSwitcher=r},621:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;const i=n(865);class r extends i.BaseComponent{constructor(e){super(e),this.id=0,this.id++}render(){return this.element.innerHTML=`\n    <ul class="pagination-list">\n      <li class="page-item"><button class="btn btn-sm btn-lightyellow" id="prev-${this.id}">Prev</button></li>\n      <li class="page-item"><button class="btn btn-sm btn-lightyellow" id="next-${this.id}">Next</button></li>\n    </ul>\n    `,this.prev=this.element.querySelector(`#prev-${this.id}`),this.next=this.element.querySelector(`#next-${this.id}`),this.element}}t.Pagination=r},556:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GaragePage=void 0;const r=n(865),a=n(265),s=n(858),o=n(264),d=n(799),c=n(974),l=n(54);class u extends r.BaseComponent{constructor(e){super(e),this.menu=new d.Menu({tag:"section",class:"menu",id:"menu"}),this.garage=new o.Garage({tag:"section",class:"garage",id:"garage"}),this.selectedCar=null}render(){return this.element.append(this.menu.render()),this.element.append(this.garage.render()),this.element}subscribe(){document.body.addEventListener("click",(e=>i(this,void 0,void 0,(function*(){e.target instanceof HTMLElement&&("create-car-btn"===e.target.id&&(e.preventDefault(),this.createCarListener()),e.target.id.includes("select-car-")&&this.selectCarListener(c.getBtnID(e.target.id)),"update-car-btn"===e.target.id&&(e.preventDefault(),this.updateCarListener()),e.target.id.includes("remove-car-")&&this.removeCarListener(c.getBtnID(e.target.id)),e.target.id.includes("start-engine-")&&this.startDriving(c.getBtnID(e.target.id)),e.target.id.includes("stop-engine-")&&this.stopDriving(c.getBtnID(e.target.id)),"race"===e.target.id&&(e.target.disabled=!0,yield this.raceHandler()),"reset"===e.target.id&&(e.target.disabled=!0,yield this.resetRaceHandler()),"generate"===e.target.id&&(e.target.disabled=!0,yield this.generatorHandler(),e.target.disabled=!1))}))))}generatorHandler(){return i(this,void 0,void 0,(function*(){const e=c.generateRandomCarInfo();yield Promise.all(e.map((e=>a.createCar(e)))),yield a.updateStateGarage(),this.garage.render()}))}resetRaceHandler(){return i(this,void 0,void 0,(function*(){yield Promise.all(l.store.cars.map((({id:e})=>this.stopDriving(e)))),this.garage.modal.element.classList.remove("show"),document.getElementById("race").disabled=!1}))}raceHandler(){return i(this,void 0,void 0,(function*(){const e=yield this.racing(this.startDriving.bind(this));this.garage.modal.render(e.car.name,e.time),this.garage.modal.element.classList.add("show"),yield s.saveWinner(e.car.id,e.time),document.getElementById("reset").disabled=!1}))}raceAll(e,t){return i(this,void 0,void 0,(function*(){const{success:n,id:i,time:r}=yield Promise.race(e);if(!n){const n=t.findIndex((e=>e===i)),r=[...e.slice(0,n),...e.slice(n+1,e.length)],a=[...t.slice(0,n),...t.slice(n+1,e.length)];return this.raceAll(r,a)}return{car:l.store.cars.find((e=>e.id===i)),time:+(r/1e3).toFixed(2)}}))}racing(e){return i(this,void 0,void 0,(function*(){const t=l.store.cars.map((({id:t})=>e(t))),n=l.store.cars.map((e=>e.id));return yield this.raceAll(t,n)}))}startDriving(e){return i(this,void 0,void 0,(function*(){const t=this.element.querySelector(`#start-engine-${e}`),n=this.element.querySelector(`#stop-engine-${e}`);t.disabled=!0,t.classList.add("ignition");const{distance:i,velocity:r}=yield a.startEngine(e);t.classList.remove("ignition"),n.disabled=!1;const s=Math.round(i/r),o=document.getElementById(`car-${e}`),d=document.getElementById(`flag-${e}`),u=c.getDistanceBetweenElements(o,d)+80;c.animation(o,u,s);const{success:h}=yield a.drive(e);return h||window.cancelAnimationFrame(l.store.animation[e]),{success:h,id:e,time:s}}))}stopDriving(e){return i(this,void 0,void 0,(function*(){const t=this.element.querySelector(`#stop-engine-${e}`),n=this.element.querySelector(`#start-engine-${e}`);t.disabled=!0,t.classList.add("braking"),yield a.stopEngine(e),t.classList.remove("braking"),n.disabled=!1,document.getElementById(`car-${e}`).style.transform="translateX(0)",window.cancelAnimationFrame(l.store.animation[e])}))}createCarListener(){return i(this,void 0,void 0,(function*(){const e=this.element.querySelector("#create-car-name"),t=this.element.querySelector("#create-car-color");if(!e.value)return;const n={name:e.value,color:t.value};yield a.createCar(n),yield a.updateStateGarage(),this.garage.render(),e.value=""}))}selectCarListener(e){return i(this,void 0,void 0,(function*(){this.selectedCar=yield a.getCar(e);const t=document.getElementById("update-car-name");t.value=this.selectedCar.name,t.disabled=!1;const n=document.getElementById("update-car-color");n.value=this.selectedCar.color,n.disabled=!1,document.getElementById("update-car-btn").disabled=!1}))}updateCarListener(){return i(this,void 0,void 0,(function*(){const e=document.getElementById("update-car-btn"),t=document.getElementById("update-car-name"),n=document.getElementById("update-car-color"),i={name:t.value,color:n.value};this.selectedCar&&(yield a.updateCar(this.selectedCar.id,i),yield a.updateStateGarage(),this.garage.render(),t.value="",t.disabled=!0,n.disabled=!0,e.disabled=!0)}))}removeCarListener(e){return i(this,void 0,void 0,(function*(){yield a.deleteCar(e),yield s.deleteWinner(e),yield a.updateStateGarage(),this.garage.render()}))}}t.GaragePage=u},265:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStateGarage=t.drive=t.stopEngine=t.startEngine=t.updateCar=t.deleteCar=t.createCar=t.getCar=t.getCars=void 0;const r=n(54),a="http://localhost:3000",s=`${a}/garage`,o=`${a}/engine`;t.getCars=(e,t=7)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s}?_page=${e}&_limit=${t}`);return{items:yield n.json(),count:Number(n.headers.get("X-Total-Count"))}})),t.getCar=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}/${e}`);return yield t.json()})),t.createCar=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.deleteCar=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});return yield t.json()})),t.updateCar=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.startEngine=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${o}?id=${e}&status=started`);return yield t.json()})),t.stopEngine=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${o}?id=${e}&status=stopped`);return yield t.json()})),t.drive=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${o}?id=${e}&status=drive`);return 200!==t.status?{success:!1}:yield t.json()})),t.updateStateGarage=()=>i(void 0,void 0,void 0,(function*(){const{items:e,count:n}=yield t.getCars(r.store.carsPage);r.store.cars=e,r.store.carsCount=n}))},403:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const i=n(865);class r extends i.BaseComponent{render(e){return this.element.innerHTML=`<svg viewBox="0 0 1280 640">\n    <g transform="translate(0,640) scale(0.1,-0.1)" fill="${e}" stroke="none">\n      <path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6 -10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91 -250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340 -49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3 -150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418 0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64 -126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622 756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302 140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263 l-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22 259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239 -63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1 -116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45 525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50 680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0 -226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332 -208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341 10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66 -422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36 -485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83 54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12 -67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134 274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11 -27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>\n      <path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262 -467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493 -551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23 86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50 -354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220 1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360 0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>\n      <path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120 -114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/>\n      <path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28 22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/>\n      <path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0 165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/>\n      <path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0 165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/>\n      <path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29 58 -13 0 -29 -8 -34 -18z"/>\n      <path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57 9 153 -71 153 -27 0 -44 -8 -66 -29z"/>\n      <path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16 -54 -2z"/>\n      <path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67 -62 36z"/>\n      <path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123 113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/>\n      <path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71 195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/>\n      <path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25 -70 0z"/>\n      <path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7 0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n      <path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223 232 -230 231 -3 0 -11 -3 -17 -6z"/>\n      <path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24 -411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118 380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86 -407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96 33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176 238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207 81 364 77 109 -3 143 -7 210 -30z"/>\n      <path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80 119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/>\n      <path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20 -163 84 -207 91 l-43 7 0 -162z"/>\n      <path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0 165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/>\n      <path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45 -88 241 -108 241 -4 0 -57 -51 -119 -112z"/>\n      <path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64 -10 68 -14 2 -31 -3 -38 -10z"/>\n      <path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0 -44 -6 -64 -31z"/>\n      <path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20 -54 2z"/>\n      <path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13 -24 13 -3 0 -14 -6 -24 -13z"/>\n      <path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120 109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/>\n      <path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177 79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/>\n      <path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43 -67 12z"/>\n      <path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108 10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n      <path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186 61 239 98 16 10 -216 242 -234 235z"/>\n    </g>\n  </svg>`,this.element}}t.Car=r},264:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const r=n(865),a=n(54),s=n(369),o=n(621),d=n(531),c=n(265);class l extends r.BaseComponent{constructor(e){super(e),this.pagination=new o.Pagination({tag:"nav",class:"pagination"}),this.modal=new s.Modal({tag:"section",class:"modal"})}render(){this.element.innerHTML=`\n    <h2 class="garage__title">Garage(${a.store.carsCount})</h2>\n    <div class="garage__page-number">Page #${a.store.carsPage}</div>\n    <div class="garage__track track">\n      <ul class="track__list">\n      </ul>\n      </div>\n    `;const e=this.element.querySelector(".track__list");return a.store.cars&&a.store.cars.forEach((t=>{const n=new d.Track({tag:"li",class:"track__item",id:`track-${t.id}`}).render(t);e.append(n)})),this.element.append(this.pagination.render()),this.element.append(this.modal.element),this.setGaragePagination(),this.updateGaragePaginationState(),this.element}setGaragePagination(){this.pagination.prev.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){a.store.carsPage--,yield c.updateStateGarage(),this.render(),this.updateGaragePaginationState()})))),this.pagination.next.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){a.store.carsPage++,yield c.updateStateGarage(),this.render(),this.updateGaragePaginationState()}))))}updateGaragePaginationState(){a.store.pagesCountGarage=Math.ceil(a.store.carsCount/a.store.carsPerPage),1===a.store.carsPage?this.pagination.prev.disabled=!0:this.pagination.prev.disabled=!1,a.store.carsPage===a.store.pagesCountGarage?this.pagination.next.disabled=!0:this.pagination.next.disabled=!1}}t.Garage=l},369:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;const i=n(865);class r extends i.BaseComponent{render(e,t){return this.element.innerHTML=`\n    <p class="modal-text">${e} went first [${t}]</p>\n    `,this.closeModalListener(),this.element}closeModalListener(){this.element.addEventListener("click",(()=>{this.element.classList.remove("show")}))}}t.Modal=r},531:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;const r=n(865),a=i(n(879)),s=n(403);class o extends r.BaseComponent{render({id:e,name:t,color:n}){return this.element.innerHTML=`\n    <div class="track__buttons">\n      <button class="track__select-btn btn btn-lightgreen btn-sm" id="select-car-${e}">Select</button>\n      <button class="track__remove-btn btn btn-lightred btn-sm" id="remove-car-${e}">Remove</button>\n      <span class="track__car-model-name">${t}</span>\n    </div>\n    <div class="track__content">\n      <div class="track__drive-buttons">\n        <button class="track__start-btn btn" id="start-engine-${e}">A</button>\n        <button class="track__stop-btn btn" id="stop-engine-${e}" disabled>B</button>\n      </div>\n      <div class="track__car"></div>\n      <div class="track__flag" id="flag-${e}"><img src="${a.default}" alt="flag"></div>\n    </div>\n    <hr />\n    `,this.renderCar(e,n),this.element}renderCar(e,t){this.element.querySelector(".track__car").append(new s.Car({tag:"div",class:"track__car-image",id:`car-${e}`}).render(t))}}t.Track=o},165:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ControlsBlock=void 0;const i=n(865);class r extends i.BaseComponent{render(){return this.element.innerHTML='\n    <button class="btn btn-lightgreen btn-sm controls-block__btn-race" id="race">Race</button>\n    <button class="btn btn-lightred btn-sm controls-block__btn-reset" id="reset" disabled>Reset</button>\n    <button class="btn btn-lightyellow btn-sm controls-block__btn-generate" id="generate">Generate Cars</button>\n    ',this.element}}t.ControlsBlock=r},116:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateBlock=void 0;const i=n(865);class r extends i.BaseComponent{render(){return this.element.innerHTML='\n    <input type="text" class="input input-small create-block__input-text" id="create-car-name"/>\n    <input type="color" class="create-block__input-color" id="create-car-color" value="#ffda6a"/>\n    <button class="btn btn-lightyellow btn-sm create-block__btn" id="create-car-btn" type="submit">Create Car</button>\n      ',this.element}}t.CreateBlock=r},799:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;const i=n(865),r=n(165),a=n(116),s=n(366);class o extends i.BaseComponent{constructor(e){super(e),this.createBlock=new a.CreateBlock({tag:"form",class:"create-block",id:"create-car"}),this.updateBlock=new s.UpdateBlock({tag:"form",class:"update-block",id:"update-car"}),this.controlsBlock=new r.ControlsBlock({tag:"div",class:"controls-block",id:"race-control"})}render(){return this.element.append(this.createBlock.render()),this.element.append(this.updateBlock.render()),this.element.append(this.controlsBlock.render()),this.element}}t.Menu=o},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateBlock=void 0;const i=n(865);class r extends i.BaseComponent{render(){return this.element.innerHTML='\n    <input type="text" class="input input-small create-block__input-text" id="update-car-name" disabled />\n    <input type="color" class="create-block__input-color" value="#212529" id="update-car-color" disabled />\n    <button class="btn btn-lightyellow btn-sm create-block__btn"\n    id="update-car-btn" type="submit" disabled>Update Car</button>\n      ',this.element}}t.UpdateBlock=r},246:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winner=void 0;const i=n(865),r=n(54),a=n(403);class s extends i.BaseComponent{render(e,t){return this.element.innerHTML=`\n      <td>${(r.store.winnersPage-1)*r.store.winnersPerPage+t+1}</td>\n      <td>${new a.Car({tag:"div",class:"car-icon",id:`car-icon-${t+1}`}).render(e.car.color).outerHTML}</td>\n      <td>${e.car.name}</td>\n      <td>${e.wins}</td>\n      <td>${e.time}</td>`,this.element}}t.Winner=s},848:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersPage=void 0;const r=n(865),a=n(313),s=n(54),o=n(621),d=n(858);class c extends r.BaseComponent{constructor(e){super(e),this.table=new a.WinnersTable({tag:"table",class:"table",id:"table"}),this.pagination=new o.Pagination({tag:"nav",class:"pagination"})}render(){return this.element.innerHTML=`\n    <h2 class="winners__title">Winners(${s.store.winnersCount})</h2>\n    <h3 class="winners__page">Page #${s.store.winnersPage}</h3>`,this.element.append(this.table.render()),this.element.append(this.pagination.render()),this.subscribe(),this.updateWinnersPaginationState(),this.element}subscribe(){this.setWinnersPagination(),this.setSortOrder()}setWinnersPagination(){this.pagination.prev.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){s.store.winnersPage--,yield d.updateStateWinners(),this.render(),this.updateWinnersPaginationState()})))),this.pagination.next.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){s.store.winnersPage++,yield d.updateStateWinners(),this.render(),this.updateWinnersPaginationState()}))))}updateWinnersPaginationState(){s.store.pagesCountWinners=Math.ceil(s.store.winnersCount/s.store.winnersPerPage),1===s.store.winnersPage?this.pagination.prev.disabled=!0:this.pagination.prev.disabled=!1,s.store.winnersPage===s.store.pagesCountWinners?this.pagination.next.disabled=!0:this.pagination.next.disabled=!1}setSortOrder(){return i(this,void 0,void 0,(function*(){const e=this.element.querySelector("#table-wins"),t=this.element.querySelector("#table-time");e.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){s.store.sortBy="wins",e.classList.contains("asc")?(s.store.sortOrder="desc",e.classList.remove("asc"),e.classList.add("desc")):e.classList.contains("desc")?(s.store.sortOrder="asc",e.classList.remove("desc"),e.classList.add("asc")):(s.store.sortOrder="desc",t.classList.remove("asc"),t.classList.remove("desc"),e.classList.add("desc")),yield d.getWinners(s.store.winnersPage,s.store.winnersPerPage,s.store.sortBy,s.store.sortOrder),yield d.updateStateWinners(),this.render()})))),t.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){s.store.sortBy="time",t.classList.contains("asc")?(s.store.sortOrder="desc",t.classList.remove("asc"),t.classList.add("desc")):t.classList.contains("desc")?(s.store.sortOrder="asc",t.classList.remove("desc"),t.classList.add("asc")):(s.store.sortOrder="desc",e.classList.remove("asc"),e.classList.remove("desc"),t.classList.add("desc")),yield d.updateStateWinners(),this.render()}))))}))}}t.WinnersPage=c},313:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersTable=void 0;const i=n(865),r=n(246),a=n(54);class s extends i.BaseComponent{render(){return this.element.innerHTML=`\n      <thead>\n        <th>№</th>\n        <th>Car</th>\n        <th>Name</th>\n        <th class="table-button ${"wins"===a.store.sortBy?a.store.sortOrder:""}" id="table-wins">Wins</th>\n        <th class="table-button ${"time"===a.store.sortBy?a.store.sortOrder:""}" id="table-time">Best time (seconds)</th>\n      </thead>\n      <tbody>\n      </tbody>`,this.renderWinnersList(),this.element}renderWinnersList(){const e=this.element.querySelector("tbody");a.store.winners.forEach(((t,n)=>{const i=new r.Winner({tag:"tr"}).render(t,n);e.append(i)}))}}t.WinnersTable=s},858:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStateWinners=t.saveWinner=t.updateWinner=t.deleteWinner=t.createWinner=t.getWinnerStatus=t.getWinner=t.getWinners=void 0;const r=n(54),a=n(265),s="http://localhost:3000/winners";t.getWinners=(e=1,t=10,n="wins",r="desc")=>i(void 0,void 0,void 0,(function*(){const o=yield fetch(`${s}?_page=${e}&_limit=${t}&_sort=${n}&_order=${r}`),d=yield o.json();return{items:yield Promise.all(d.map((e=>i(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield a.getCar(e.id)})}))))),count:Number(o.headers.get("X-Total-Count"))}})),t.getWinner=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}/${e}`);return yield t.json()})),t.getWinnerStatus=e=>i(void 0,void 0,void 0,(function*(){let t;try{t=yield fetch(`${s}/${e}`)}catch(e){(()=>{throw new Error("Catched")})()}return t.status})),t.createWinner=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()})),t.deleteWinner=e=>i(void 0,void 0,void 0,(function*(){const t=yield fetch(`${s}/${e}`,{method:"DELETE"});return yield t.json()})),t.updateWinner=(e,t)=>i(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield n.json()})),t.saveWinner=(e,n)=>i(void 0,void 0,void 0,(function*(){if(200===(yield t.getWinnerStatus(e))){const i=yield t.getWinner(e);yield t.updateWinner(e,{id:e,wins:i.wins+1,time:n<i.time?n:i.time})}else yield t.createWinner({id:e,wins:1,time:n})})),t.updateStateWinners=()=>i(void 0,void 0,void 0,(function*(){const{items:e,count:n}=yield t.getWinners(r.store.winnersPage,r.store.winnersPerPage,r.store.sortBy,r.store.sortOrder);r.store.winners=e,r.store.winnersCount=n}))},54:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0,t.store={carsPage:1,cars:null,carsCount:null,pagesCountGarage:null,carsPerPage:7,winnersPage:1,winners:null,winnersCount:null,pagesCountWinners:null,winnersPerPage:10,animation:{},sortBy:"time",sortOrder:"desc"}},974:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.refreshStore=t.generateRandomCarInfo=t.getRandomColor=t.getRandomName=t.getBtnID=t.animation=t.getDistanceBetweenElements=void 0;const r=n(265),a=n(858),s=n(54);function o(e){const{top:t,left:n,width:i,height:r}=e.getBoundingClientRect();return{x:n+i/2,y:t+r/2}}function d(){const e={Kia:["Seltos","Soul","Carnival"],Hyundai:["Creta","Elantra","SantaFe"],Lada:["Vesta","Largus","Xray"],Suzuki:["Jimny","SX4","Vitara"],Honda:["Civic","CR-V","Accord"],Toyota:["Camry","RAV4","Corolla"],Ford:["Fiesta","Focus","Kuga"]},t=Object.keys(e)[Math.floor(Math.random()*Object.keys(e).length)];return`${t} ${e[t][Math.floor(Math.random()*e[t].length)]}`}function c(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}t.getDistanceBetweenElements=function(e,t){const n=o(e),i=o(t);return Math.abs(n.x-i.x)},t.animation=function(e,t,n){let i=0;const r=+e.id.split("car-")[1];s.store.animation[r]=window.requestAnimationFrame((function a(o){i||(i=o);const d=o-i,c=Math.round(d*(t/n));e.style.transform=`translateX(${c}px)`,c<t&&(s.store.animation[r]=window.requestAnimationFrame(a))}))},t.getBtnID=function(e){return e.includes("start-engine-")?Number(e.split("start-engine-")[1]):e.includes("stop-engine-")?Number(e.split("stop-engine-")[1]):e.includes("select-car-")?Number(e.split("select-car-")[1]):e.includes("remove-car-")?Number(e.split("remove-car-")[1]):-1},t.getRandomName=d,t.getRandomColor=c,t.generateRandomCarInfo=(e=100)=>new Array(e).fill(1).map((()=>({name:d(),color:c()}))),t.refreshStore=()=>i(void 0,void 0,void 0,(function*(){const{items:e,count:t}=yield r.getCars(s.store.carsPage);s.store.cars=e,s.store.carsCount=t;const{items:n,count:i}=yield a.getWinners(s.store.winnersPage);s.store.winners=n,s.store.winnersCount=i}))},879:(e,t,n)=>{e.exports=n.p+"assets/9cf2826fee7f861cfb12.svg"}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{const e=n(208);n(387),(new e.App).run()})()})();